<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Happy Valentine‚Äôs Day to my bbyüíó</title>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <style>
    html,body{height:100%;margin:0;background:#0b0b16}
    body{
      font-family:"Press Start 2P",system-ui;
      height:100dvh; /* iPhone-friendly */
      overflow:hidden;
      padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
    }

    .wrap{
      position:relative;
      width:100vw;
      height:100dvh;
      background:#000;
      overflow:hidden;
    }

    canvas{
      width:100%;
      height:100%;
      image-rendering:pixelated;
      display:block;
    }

    .ui{position:absolute;inset:0;pointer-events:none}
    .title{
      position:absolute;top:18px;left:50%;transform:translateX(-50%);
      font-size:16px;color:#ff4fa3;text-shadow:2px 2px 0 #000;
      white-space:nowrap;
    }
    .hint{
      position:absolute;bottom:96px;left:50%;transform:translateX(-50%);
      font-size:11px;color:#fff;text-shadow:2px 2px 0 #000;
      padding:10px 14px;border-radius:14px;
      background:rgba(27,21,48,.55);
      border:2px solid rgba(255,255,255,.18);
      text-align:center;line-height:1.6;
      max-width: 90vw;
    }
    .sig{
      position:absolute;bottom:26px;left:50%;transform:translateX(-50%);
      display:flex;gap:10px;align-items:center;font-size:12px;color:#fff;text-shadow:2px 2px 0 #000
    }
    .chip{
      pointer-events:auto;
      position:absolute;right:16px;bottom:16px;
      padding:10px 12px;border-radius:14px;border:2px solid rgba(255,255,255,.2);
      background:rgba(0,0,0,.35);
    }
    button{
      pointer-events:auto;
      font-family:"Press Start 2P";
      font-size:10px;border:2px solid #000;background:#fff2fb;color:#000;
      padding:10px;border-radius:12px;cursor:pointer;box-shadow:2px 2px 0 #000
    }
    button:active{transform:translate(1px,1px);box-shadow:1px 1px 0 #000}
  </style>
</head>
<body>
<div class="wrap">
  <canvas id="c"></canvas>

  <div class="ui">
    <div class="title">Happy Valentine‚Äôs Day My bby</div>
    <div class="hint">Tap anywhere to Eat your Cheese<br/>This cheeses is just for you, Dimiüíó</div>
    <div class="sig"><span style="font-size:10px;">‚ù§Ô∏è</span><span>Love, Bas</span></div>
    <div class="chip"><button id="muteBtn">Mute</button></div>
  </div>
</div>

<script>
(() => {
  const canvas = document.getElementById("c");
  const ctx = canvas.getContext("2d");
  ctx.imageSmoothingEnabled = false;

  // Fit canvas to iPhone + desktop
  function resize(){
    const dpr = Math.max(1, Math.floor(window.devicePixelRatio || 1));
    canvas.width  = Math.floor(window.innerWidth  * dpr);
    canvas.height = Math.floor(window.innerHeight * dpr);
    ctx.setTransform(1,0,0,1,0,0); // reset
    ctx.scale(dpr, dpr);
  }
  window.addEventListener("resize", resize);
  resize();

  // Tiny chime (safe)
  let muted = false;
  const AC = new (window.AudioContext||window.webkitAudioContext)();
  function chime(){
    if(muted) return;
    const now = AC.currentTime;
    const o = AC.createOscillator();
    const g = AC.createGain();
    o.type="triangle";
    o.frequency.setValueAtTime(700, now);
    o.frequency.exponentialRampToValueAtTime(980, now+0.08);
    g.gain.setValueAtTime(0.0001, now);
    g.gain.exponentialRampToValueAtTime(0.12, now+0.02);
    g.gain.exponentialRampToValueAtTime(0.0001, now+0.14);
    o.connect(g).connect(AC.destination);
    o.start(now); o.stop(now+0.16);
  }
  document.getElementById("muteBtn").onclick = () => {
    muted = !muted;
    document.getElementById("muteBtn").textContent = muted ? "Unmute" : "Mute";
    chime();
  };

  // World state
  const planted = [];
  const cheeses = [];
  let t = 0;

  function irand(a,b){ return Math.floor(Math.random()*(b-a+1))+a; }

  function pixelCloud(x,y,s){
    const px = 6*s;
    const blocks=[[1,0],[2,0],[3,0],[0,1],[1,1],[2,1],[3,1],[4,1],[1,2],[2,2],[3,2]];
    ctx.fillStyle="#fff";
    blocks.forEach(([bx,by])=>ctx.fillRect(Math.round(x+bx*px),Math.round(y+by*px),px,px));
  }

  // Bigger pixel tulip üå∑
  function tulip(x,y,petal){
    // stem
    ctx.fillStyle="#2fbf4b";
    ctx.fillRect(x+6,y+16,4,26);
    // leaves
    ctx.fillRect(x+2,y+28,6,4);
    ctx.fillRect(x+10,y+30,6,4);

    // petals (bigger)
    ctx.fillStyle=petal;
    ctx.fillRect(x+4,y+6,12,10);
    ctx.fillRect(x+2,y+10,4,8);
    ctx.fillRect(x+16,y+10,4,8);
    // top notch
    ctx.fillRect(x+8,y+4,4,4);

    // outline-ish shadow
    ctx.fillStyle="rgba(0,0,0,.12)";
    ctx.fillRect(x+4,y+16,12,2);
  }

  // Cute cheese üßÄ
  function cheese(x,y){
    // main block
    ctx.fillStyle="#ffd24a";
    ctx.fillRect(x,y,18,14);
    // bite corner
    ctx.clearRect(x+14,y,4,4);

    // holes
    ctx.fillStyle="#e7b93d";
    ctx.fillRect(x+4,y+4,2,2);
    ctx.fillRect(x+10,y+7,2,2);
    ctx.fillRect(x+6,y+10,2,2);

    // tiny outline/shadow
    ctx.fillStyle="rgba(0,0,0,.12)";
    ctx.fillRect(x,y+12,18,2);
  }

  function ensureCheese(){
    // keep ~20 cheeses scattered in grass
    const W = window.innerWidth, H = window.innerHeight;
    const horizon = Math.floor(H*0.40);
    if(cheeses.length) return;
    for(let i=0;i<20;i++){
      cheeses.push({
        x: irand(10, W-28),
        y: irand(horizon+40, H-30),
        bob: Math.random()*Math.PI*2
      });
    }
  }

  function draw(){
    t++;

    const W = window.innerWidth, H = window.innerHeight;
    const horizon = Math.floor(H*0.40);

    // sky
    const g = ctx.createLinearGradient(0,0,0,H);
    g.addColorStop(0,"#79b7ff");
    g.addColorStop(1,"#bfe6ff");
    ctx.fillStyle=g; ctx.fillRect(0,0,W,H);

    // moving clouds
    pixelCloud(40 + Math.sin(t/80)*6, 70, 1.1);
    pixelCloud(220 + Math.sin(t/95)*7, 110, 1.3);

    // grass
    ctx.fillStyle="#155f28"; ctx.fillRect(0,horizon,W,H-horizon);
    ctx.fillStyle="rgba(0,0,0,.12)";
    for(let y=horizon;y<H;y+=18) ctx.fillRect(0,y,W,3);

    // sprinkle tiny wildflowers
    for(let i=0;i<80;i++){
      const x = irand(0,W-2);
      const y = irand(horizon+30, H-12);
      const c = ["#ff5aa5","#ffd24a","#7fd6ff","#b68cff","#ffffff"][irand(0,4)];
      ctx.fillStyle=c; ctx.fillRect(x,y,2,2);
    }

    // cheese field
    ensureCheese();
    cheeses.forEach(c=>{
      const bob = Math.sin(t/30 + c.bob) * 1; // tiny float
      cheese(Math.round(c.x), Math.round(c.y + bob));
    });

    // planted tulips
    planted.forEach(p => tulip(p.x, p.y, p.c));

    requestAnimationFrame(draw);
  }
  draw();

  // Tap to plant tulips
  canvas.addEventListener("pointerdown", (e) => {
    if(AC.state==="suspended") AC.resume();

    const rect = canvas.getBoundingClientRect();
    const mx = (e.clientX-rect.left);
    const my = (e.clientY-rect.top);

    const H = window.innerHeight;
    const horizon = Math.floor(H*0.40);
    if(my < horizon+10) return;

    const colors=["#ff5aa5","#ffd24a","#7fd6ff","#b68cff","#ff7aa5"];
    planted.push({
      x: Math.max(0, Math.min(window.innerWidth-24, Math.round(mx-12))),
      y: Math.max(horizon+20, Math.min(window.innerHeight-60, Math.round(my-44))),
      c: colors[Math.floor(Math.random()*colors.length)]
    });

    chime();
  });
})();
</script>
</body>
</html>
